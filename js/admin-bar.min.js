jQuery(document).ready(function(a){function c(b){var d=b.target.offsetParent?b.target.offsetParent.id:"";a(b.target).closest("#wp-admin-bar-epub-post-links").length||a(b.target).closest("#wp-admin-bar-epub-page-links").length||a(b.target).closest("#wp-admin-bar-epub-cpt-links").length?a("#"+d).hasClass("epub_active_done")?a("#"+d).removeClass("epub_active_done"):a("#"+d).hasClass("epub_active_done")!==!1||"wp-admin-bar-epub-post-links"!=d&&"wp-admin-bar-epub-page-links"!=d&&"wp-admin-bar-epub-cpt-links"!=d||(a("#wp-admin-bar-root-default").find("li").removeClass("epub_active"),document.removeEventListener("click",c)):(a("#wp-admin-bar-root-default").find("li").removeClass("epub_active"),document.removeEventListener("click",c))}function d(){a("#wp-admin-bar-root-default").find("li").removeClass("epub_active"),a("#wpadminbar").find('li.menupop:not([id^="wp-admin-bar-epub"])').unbind("mouseenter.epub-bar")}function e(b){function e(){if(!a(this).hasClass("epub_active")){a(".cpt_group_heading").removeClass("epub_active"),a(this).addClass("epub_active");var b=a(this).attr("id");h(b)}}a(b).on("click",function(){0!=a("#wpadminbar").find(".epub-hide-lookup").length&&(a(this).hasClass("epub_active")||(document.addEventListener("click",c),a("#wpadminbar").find('li.menupop:not([id^="wp-admin-bar-epub"])').bind("mouseenter.epub-bar",d),a("#wp-admin-bar-root-default").find("> li").removeClass("epub_active"),a(this).addClass("epub_active"),a(this).addClass("epub_active_done")))}),a(b+"-default > li > .ab-item").mouseenter(function(b){var c=a(this).parent().attr("id");a(this).toggleClass("epub_hover");var d=a("#"+c+" .epub_load_more").length;d&&f(c)}),a(b+"-default > li > .ab-item").click(function(){0!=a("#wpadminbar").find(".epub-hide-lookup").length&&(a(b+"-default > li").removeClass("epub_active"),a(this).parent().addClass("epub_active"))}),a(b).on("click",".epub_show_more_message",function(){if(0!=a("#wpadminbar").find(".epub-hide-lookup").length){var b=a(this).attr("id");g(b)}}),a("body").on("click",".cpt_group_heading",function(){0!=a("#wpadminbar").find(".epub-hide-lookup").length&&e.call(this)}),a("body .cpt_group_heading").mouseenter(function(){a("#wpadminbar").find(".epub-hide-lookup").length>0||(a(".epub-third-box").remove(),e.call(this))})}function f(b){var c={action:"epub_get_more_posts",info:b};a.ajax({type:"POST",dataType:"json",data:c,url:epub_scripts.ajaxurl}).done(function(c){if(c=c?c:"",void 0!=c.success){a("#"+b+" .epub_show_more_message").remove();for(var d=c.success.length,e=0;e<d;e++)a("#"+b+" ul").append(c.success[e])}}).always(function(){a("#"+b+" .epub_load_more").remove()})}function g(b){a("#"+b).prepend('<div class="loading-spinner"></div>');var c={action:"epub_get_more_posts",info:b};a.ajax({type:"POST",dataType:"json",data:c,url:epub_scripts.ajaxurl}).done(function(c){if(c=c?c:"",void 0!=c.success)for(var d=c.success.length,e=0;e<d;e++)a("#"+b).before(c.success[e])}).always(function(){a("#"+b).remove()})}function h(b){a("#"+b).prepend('<div class="loading-spinner"></div>');var c={action:"epub_get_more_posts",info:b};a.ajax({type:"POST",dataType:"json",data:c,url:epub_scripts.ajaxurl}).done(function(c){if(c=c?c:"",void 0!=c.success){a(".epub-third-box").remove();for(var d=c.success.length,e="",f=0;f<d;f++)e+=c.success[f];a("#"+b+" .ab-item").after('<div class="epub-third-box ab-sub-wrapper"><ul>'+e+"</ul></div>"),i(b)}})}function i(c){var d=a("#"+c+" .epub-third-box"),e=a("#"+c).position();b>782&&d.css({top:e.top+26,left:e.left})}function j(){var b=a(window).scrollTop();document.cookie="epub_userPosition="+b}var b=a(window).width();b<=782&&(a("#wp-admin-bar-epub-post-links").addClass("epub-hide-lookup"),a("#wp-admin-bar-epub-post-links").addClass("epub-hover-effect")),e("#wp-admin-bar-epub-post-links"),e("#wp-admin-bar-epub-page-links"),e("#wp-admin-bar-epub-cpt-links"),function(){var b=a("#publish"),c=a("#post-preview"),d=a("#save-post"),e=a("#post_status"),f=a("#wp-admin-bar-epub-update").find("a"),g=a("#wp-admin-bar-epub-preview-changes").find("a"),h=a("#wp-admin-bar-epub-save-draft").find("a"),i=a("#wp-admin-bar-epub-save-as-pending-review").find("a");if(1==b.length){var k=b.val();if(f.html(k),f.on("click",function(a){a.preventDefault(),j(),b.trigger("click")}),g.on("click",function(a){a.preventDefault(),c.trigger("click")}),0==d.length)h.html("Save As Draft"),h.on("click",function(c){c.preventDefault(),j(),a("#post_status").val("draft"),b.trigger("click")}),i.on("click",function(c){c.preventDefault(),j(),a("#post_status").val("pending"),b.trigger("click")});else if(1==d.length){var l=e.val();"pending"==l&&(h.html("Save As Draft"),i.html("Save Pending")),a(h).on("click",function(b){b.preventDefault(),j(),a("#post_status").val("draft"),d.trigger("click")}),i.on("click",function(b){b.preventDefault(),j(),a("#post_status").val("pending"),d.trigger("click")})}a(window).on("load",function(){var a="epub_userPosition",b=document.cookie,c=b.indexOf(a),d=b.substring(c),e=d.indexOf(";"),f=d.substring(0,e),g=f.substring(f.indexOf("=")+1);window.scrollTo(0,parseInt(g)),document.cookie="epub_userPosition= 0"})}}()});